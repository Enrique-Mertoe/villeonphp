/*!
 * Smallvillejs v1.0.0
 * Author: Abuti Martin
 * License: MIT
 * Repository: https://github.com/Enrique-Mertoe/smallville_cdns
 */
!function(){"use strict";!function(t){let e,n=function(t){let e="string"==typeof t?document.querySelectorAll(t):t instanceof NodeList||Array.isArray(t)?Array.from(t):[t];t.SMVQuery&&t!==window&&(e=t);let l=t=>{e.forEach(((e,n)=>{t.call(0,e,n)}))},a={SMVQuery:n,size:e.length,ready(t){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(t,1):document.addEventListener("DOMContentLoaded",t)},on(t,e,n){return l((function(o,i){o.addEventListener(t,(function(t){n?t.target.closest(e)&&n.call(t.target.closest(e),t):e.call(o,t)}))})),this},click(t){return void 0===t?(l((function(t,e){t.click()})),this):this.on("click",t)},scroll:t=>(a.on("scroll",t),this),show(){return l((function(t,e){t.style.display="block"})),this},hide(){return l((function(t,e){t.style.display="none"})),this},attr(t,n){return void 0===n?e.length?e[0]?.getAttribute(t):null:(l((function(e){e.setAttribute(t,n)})),this)},hAttr:t=>"string"==typeof t&&e[0]?.hasAttribute(t),txt(t){return void 0===t?e.length?e[0]?.textContent:null:(l((function(e){e.textContent=t})),this)},val(t){return void 0===t?e.length?e[0]?.value:null:(l((function(e){e.value=t})),this)},html(t){return void 0===t?e.length?e[0]?.innerHTML:null:(l((function(e){e.innerHTML=t})),s.html?.forEach((t=>{t?.call(null,{})})),this)},remove(){return l((function(t){t.parentNode&&t.parentNode.removeChild(t)})),this},empty(){return l((function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})),this},css(t){return l((function(e,n){for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=n.replace(/-([a-z])/g,(t=>t[1].toUpperCase()));e.style[o]=t[n]}})),this},rmvAttr(t){return l((function(e){e.hasAttribute(t)&&e.removeAttribute(t)})),this},append(t){return l((function(e){"string"==typeof t?e.insertAdjacentHTML("beforeend",t):t.SMVQuery&&t!==window?t.size&&t.each((function(){e.appendChild(this)})):t instanceof Node?e.appendChild(t):(t instanceof NodeList||Array.isArray(t))&&t.forEach((t=>{t instanceof Node&&e.appendChild(t)}))})),this},appendTo(t){return l((function(e){"string"==typeof t?o(t).append(e):t.SMVQuery&&t!==window?t.size&&t.append(e):t instanceof Node&&t.appendChild(e)})),this},prependTo(t){return l((function(e){"string"==typeof t?o(t).prepend(e):t.SMVQuery&&t!==window?t.size&&t.prepend(e):t instanceof Node&&t.insertBefore(e,t.firstChild)})),this},prepend(t){return l((function(e){"string"==typeof t?e.insertAdjacentHTML("afterbegin",t):t.SMVQuery&&t!==window?t.size&&t.each((function(){e.insertBefore(this,e.firstChild)})):t instanceof Node?e.insertBefore(t,e.firstChild):(t instanceof NodeList||Array.isArray(t))&&Array.from(t).reverse().forEach((t=>{t instanceof Node&&e.insertBefore(t,e.firstChild)}))})),this},next(){let t=[];return l((function(e){let n=e.nextElementSibling;n&&t.push(n)})),n(t)},prev(){let t=[];return l((function(e){let n=e.previousElementSibling;n&&t.push(n)})),n(t)},find(t){let e=[];return l((function(n){let o=n.querySelectorAll(t);o.length&&(e=e.concat(Array.from(o)))})),n(e)},closest(t){let e=[];return l((function(n){let o=n.closest(t);o&&e.push(o)})),n(e)},aClass(t){return"string"!=typeof t||t.split(/\s+/).forEach((t=>{l((function(e){e.classList.add(t)}))})),this},tClass(t){return"string"!=typeof t||t.split(/\s+/).forEach((t=>{l((function(e){e.classList.toggle(t)}))})),this},hClass:t=>"string"==typeof t&&e[0]?.classList.contains(t),id(){if(e.length)return e[0]?.id},rClass(t){return"string"!=typeof t||t.split(/\s+/).forEach((t=>{l((function(e){e.classList.remove(t)}))})),this},params(){if(!e.length)return{width:0,height:0};let t=e[0];if(!(t&&t instanceof Element))throw new Error("The argument must be a valid DOM element.");return{width:t.offsetWidth,height:t.offsetHeight}},offset(t){if(!e.length)return{top:0,left:0,right:0,bottom:0};function n(t){if(!(t&&t instanceof Element))return{top:0,left:0,right:0,bottom:0};const e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+o,left:e.left+n,right:document.documentElement.clientWidth-e.right+n,bottom:document.documentElement.clientHeight-e.bottom+o}}function o(t){if(!(t&&t instanceof Element))return{top:0,left:0,right:0,bottom:0};const e=t.offsetParent;if(!e)return{top:0,left:0,right:0,bottom:0};const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();return{top:n.top-o.top,left:n.left-o.left,right:o.right-n.right,bottom:o.bottom-n.bottom}}return t?o(e[0]):n(e[0])},is(t){if(!e.length)return;let n=!1,o=e[0];return"string"==typeof t?o.matches(t)&&(n=!0):t instanceof Element?o===t&&(n=!0):t.size&&t.SMVQuery&&t!==window&&o===(t=t[0])&&(n=!0),n},each(t){return l((function(e){t.call(e,e)})),this},modal(t,e,n){e=void 0===e||"function"!=typeof e?function(){}:e,t=void 0===t?"show":t;let r,a=[],u=[],c={onClose(t){a.push(t)},onClosed(t){u.push(t)},onOpen(t){r=t}};const d=t=>(c={...c,...t},e(c),c),f=t=>{o(t).css({display:"block"}),i.delay((e=>o(t).aClass("show")));let e={identity:o(t),trigger:void 0===n?void 0:o(n),root:o(t),body:o(t).find(".modal-body")},r=d(e);s["modal-open"]?.forEach((t=>{t?.call(null,r)}))},h=t=>{let e=!0;const n=t=>{Array.isArray(u)&&u.forEach((t=>{t()}))},r=e=>{o(t).rClass("show"),i.delay((e=>{o(t).css({display:"none"}),n()}),200)};let s={preventDefault(){e=!1},run_default:r};Array.isArray(a)&&a.forEach((t=>{t(s)})),e&&r()};return l((function(e,n){"show"===t?f(e):h(e),o(e).find("[data-smv-dismiss=modal]").on("click",(function(t){t.preventDefault(),h(e)}))})),this}};Object.assign(a,e);let u=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,c={formatData(t){let e={true:!0,false:!1,null:null};return Object.prototype.hasOwnProperty.call(e,t)?e:t===+t+""?+t:u.test(t)?JSON.parse(t):t},dataAttr(t,e,n){let o;if(void 0===n&&1===t.nodeType)if(o="data-"+e.replace(/[A-Z]/g,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(o))){try{n=this.formatData(n)}catch(t){}r.set(t,e,n)}else try{n=this.formatData(r.get(t,e))}catch(o){n=r.get(t,e)}return n}},d={data(t,n){if(void 0!==t){if(void 0===n){if(e.length){let o=e[0];return c.dataAttr(o,t,n)}return null}return l((function(e){r.set(e,t,n)})),this}}};return{...a,...d}};(e=function(){this.storeId="SMVQuery"+("random"+Math.random()).replace(/\D/g,"")+e.key_ref++}).prototype={stored:function(t){let e=t[this.storeId];return e||(e={},t[this.storeId]=e),e},set:function(t,e,n){let o=this.stored(t);if("string"==typeof e)o[e]=n;else for(let t in e)o[t]=e[t];return o},get:function(t,e){return void 0===e?this.stored(t):t[this.storeId]&&t[this.storeId][e]}},e.key_ref=1;let o,i,r=new e;n.post=function(){},t.SMVQuery=t.$$=o=n;let s={};t.SMV=i={init:()=>{function t(){o(".smv-layout-floating").size?setTimeout((e=>t()),300):(o("html").append("<div class=smv-layout-floating>"),o(".smv-layout-floating").append('\n                            <div class="page-loader">\n                                <div class="page-loader-content">\n                                    <span class="loader-spinner"></span>\n                                </div>\n                            </div>'))}o(document).ready((function(){t()})),i.events()},loader:{show:t=>{let e=o(".page-loader").css({display:"block"});setTimeout((t=>e.aClass("show")))},hide:t=>{let e=o(".page-loader").rClass("show");setTimeout((t=>e.css({display:"none"})),300)}},is_form_empty(t){let e=0;function n(t){return void 0!==t&&String(t).trim().length>0}return o(t).find("input,[contenteditable],textarea").each((function(t){["radio","checkbox"].includes(this.type)||n(this.value)||n(this.textContent)||(e+=1)})),e>0},smv_url:t=>location.origin+"/"+t,xhr(t,e){return $.post({url:this.smv_url("xhr/"+t),data:e})},btn_loader:t=>(t=o(t),{load(){return t.aClass("submitting"),this},dismiss(){return t.rClass("submitting"),this}}),smv_page:e=>{e&&"#"!==e&&(i.loader.show(),$.ajax({url:e,type:"GET",success:function(n){let o=!0;function r(){i.loader.hide(),n=$(document.createElement("div")).html(n),history.pushState(null,null,e),document.title=$(n).find("title").text().trim();let o=$(n).find(".smv-layout").html();o=$(o),$(".smv-layout").empty().html(o),t.scrollTo({top:0,behavior:"smooth"}),i.watcher(o)}s["page-change"]?.forEach((t=>{t?.call(null,{title:document.title,preventDefault(){o=!1},run_default:r})})),o&&r()},error:function(){alert("An error occurred. Please try again."),i.loader.hide()}}))},events(){o(document).on("click","[data-smv-link]",(function(t){t.preventDefault();const e=o(this).attr("data-smv-link");i.smv_page(e)})).on("click","[data-smv-toggle=modal]",(function(t){t.preventDefault();let e=o(this).data("smv-target")||o(this).attr("href");o(e).modal("show",null,this)})),o(t).on("popstate",(function(e){e.preventDefault(),i.smv_page(t.location.pathname)}))},on(t,e){return"string"==typeof t&&"function"==typeof e&&(()=>{let n=s[t]||[];n.push(e),s[t]=n})(),this},watcher:t=>{const e=(t=$(t)).find(".smv-reveal"),n=(t,e)=>{t.forEach((t=>{t.isIntersecting?(setTimeout((e=>t.target.classList.add("active")),100),e.unobserve(t.target)):t.target.classList.remove("active")}))},i=new IntersectionObserver(n,{root:null,rootMargin:"0px",threshold:.1});e.each((function(){i.observe(this)})),o(".typing-wrapper").each((function(t){const e=50,n=50,i=3e3;let r=!1,s=$(this).find(".typing-text").each((function(){this.style.display="none"})).length,l=0,a=$(".typing-text");function u(t){let c=a.eq(t);const d=c.text().trim();let f=0,h=!0;function p(){h?(c.text(d.substring(0,f+1)),f++,f===d.length?(h=!1,r=!0,setTimeout(p,i),o(".ityped-cursor").aClass("blinking")):(setTimeout(p,e),o(".ityped-cursor").rClass("blinking"))):(c.text(d.substring(0,f-1)),f--,0===f?(o(".ityped-cursor").aClass("blinking"),c.hide().text(d),l=(l+1)%a.length,l>s&&(l=0),setTimeout((()=>u(l)),100)):(o(".ityped-cursor").rClass("blinking"),setTimeout(p,n)))}c.show(),p()}u(l)}))},delay(t,e){return setTimeout(t,e||0),this}},o.post=function(){let t,e,n,i;if(arguments.length&&("object"==typeof arguments[0]&&arguments[0].url?(t=arguments[0].url,e=arguments[0].data??{},n=arguments[0].ok,i=arguments[0].error):(t="string"==typeof arguments[0]?arguments[0]:"",e=e=arguments[1]||{},[n,i]=Array.from(arguments).slice(-2).filter((t=>"function"==typeof t)))),!t)throw new Error("URL is required for fetch API");return o.post.dispatch({url:t,body:e,method:"POST",ok:n,error:i})},o.post.dispatch=function({url:t,body:e,method:n,ok:o,error:i,...r}){const s=new AbortController,l=s.signal;function a(){s.abort()}const u=function(t){return new u.init(t)};let c,d,f,h;return(u.init=function(t){t((t=>{c=t,void 0!==c&&f&&f(c)}),(t=>{d=t,void 0!==d&&h&&h(d)}))}).prototype={catch(t){return h=t,this},then(t){return f=t,this},abort(){return a(),this}},u(((s,a)=>{const u=t=>{"function"==typeof i&&i(t),a(t)},c=t=>{"function"==typeof o&&o(t),s(t)};fetch(t,{method:n,body:e,signal:l,...r}).then((t=>{if(t.ok){const e=t.headers.get("Content-Type");return e&&e.includes("application/json")?t.json():t.text()}404!==t.status&&u(t)})).then((t=>void 0!==t?c(t):null)).catch(u)}))},i.init();const l=function(t){return new l.init(t)};(l.init=function(t){this.view=t;let e=this,n=[],o=[];const i=function(){t.rClass("show").css({opacity:0,transition:".2s"}),setTimeout((e=>t.css({display:"none"})),200)},r=function(){let o=!0;n.some((n=>{"function"==typeof n&&n.call(e,{preventDefault(){o=!1},dismiss:i,clear(){setTimeout((()=>{t.remove()}),300)}})})),o&&i()},s=function(){o.some((t=>{"function"==typeof t&&t.call(e)})),t.css({display:"block",opacity:1}),setTimeout((()=>t.aClass("show")))},l=function(t){n.push(t)},a=function(t){o.push(t)};t.data("show",s),t.data("hide",r),t.data("on_hide",l),t.data("on_show",a),t.find("[data-smv-dismiss=modal]").on("click",(function(t){t.preventDefault(),r()}))}).prototype=l.prototype={constructor:l,onDismiss(){return this.view.data("on_hide")(...arguments),this},onOpen(){return this.view.data("on_show")(...arguments),this},show(){return this.view.data("show")(),this},dismiss(){return this.view.data("hide")(),this}},t.Modal=l}(window)}();